<div align="center">
  <font color="#ffd460">ğŸš§-  â€œUnder maintenanceâ€   -&emsp;<b>ç»´æŠ¤ä¸­</b>&emsp;-  â€œUnder maintenanceâ€    -ğŸš§</font>
</div>

# ä¹è¡Œå­¦é€”ç§»åŠ¨ç‰ˆ:<br>

##### [The program is not available in English or other foreign languages, so please use your own translation software to view the program description.]

## é¡¹ç›®ç›®çš„ä»‹ç»:<br>
* ### è¯¥é¡¹ç›®æ—¨åœ¨ç»“åˆJakartaåç«¯,ä¸ºå­¦ç”Ÿæä¾›ä¸€ä¸ªä¾¿åˆ©çš„å‡æœŸå»å‘å¡«å†™å¹³å°,é™¤äº†å¡«å†™å»å‘ä»¥å¤–,è¿˜èƒ½å¤Ÿè¿›è¡Œè¡¨å•æŸ¥çœ‹ï¼Œå¯†ç ä¿®æ”¹

***

## é¡¹ç›®æƒ…å†µä»‹ç»:<br>
* ### è¯¥é¡¹ç›®æ˜¯åŸºäºæˆ‘çš„Jakarta EEå¼€æºåº“Webé¡¹ç›®â€œStudentVentures_Hubâ€æ‰€æ‹“å±•çš„ä¸€ä¸ªç§»åŠ¨ç«¯å¹³å°
* ### è¯¥é¡¹ç›®å¿…é¡»é…åˆæœåŠ¡å™¨ä½¿ç”¨ï¼Œå¦åˆ™æ— æ³•å¯åŠ¨
* ### è¯¥é¡¹ç›®ä½¿ç”¨å±€åŸŸç½‘ä¸Jakarta EEé¡¹ç›®çš„ApacheæœåŠ¡å™¨è¿›è¡Œäº¤æµ
* ### è¯¥é¡¹ç›®é‡‡ç”¨MVVM+LiveData+ViewModelè¿›è¡Œå¼€å‘
* ### è¯¥é¡¹ç›®ç›®å‰åªåœ¨AGPä¸º8.4.0-alpha12çš„Android Studioå¹³å°ä¸Šè¿è¡Œè¿‡
* ### å¦‚æœéœ€è¦é™ä½AGPç‰ˆæœ¬è¯·ä¸æˆ‘è”ç³»ï¼š[![Outlook Badge](https://img.shields.io/badge/-timaviciix@outlook.com-0078d4?style=flat-square&logo=microsoftoutlook&logoColor=white&link=mailto:timaviciix@outlook.com)](mailto:timaviciix@outlook.com)

***

## é¡¹ç›®å†…å®¹ï¼š<br>
### 1.è¯¥é¡¹ç›®ç”±ä¸‰ä¸ªActivityç»„æˆï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªé®ç½©Activity,ä¸€ä¸ªç™»å½•Activity,ä¸€ä¸ªä¸»é¡µActivity
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
        <img src="image/Cover_Activity.png" alt="é®ç½©Activity" style="width: 100%;">
        <img src="image/Login_Activity.png" alt="ç™»å½•Activity" style="width: 100%;">
        <img src="image/Main_Activity_MainFragment.png" alt="ä¸»é¡µActivity" style="width: 100%;">
</div>

#### è¯¥Activityæµè®¾è®¡æ–¹å¼ä½¿å¾—é®ç½©Activityèƒ½å¤Ÿå®ç°é™¤ç¬¬ä¸€æ¬¡å¤–çš„è‡ªåŠ¨ç™»å½•æ¨¡å¼,é€šè¿‡è·å–Login_Activityçš„SharedPreference,é®ç½©Activityèƒ½å¤Ÿå¿«é€Ÿçš„è·å¾—ç”¨æˆ·è´¦å·ä¸å¯†ç ,è®©åº”ç”¨å®ç°è‡ªåŠ¨ç™»å½•ä»¥åŠä¿æŒä¼šè¯åŠŸèƒ½.

### 2.è¯¥é¡¹ç›®ä¸­çš„Main_Activityç”±ä¸€ä¸ªViewPager2ä¸MainActivityåº•éƒ¨å¯¼èˆªæ ç»„æˆ;
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
        <img src="image/Main_Activity_HistoryFragment.png" alt="å†å²è®°å½•Fragment" style="width: 100%;">
        <img src="image/display.gif" alt="å±•ç¤ºGIF" style="width: 100%;">
        <img src="image/Main_Activity_ProfileFragment.png" alt="ä¸ªäººActivity" style="width: 100%;">
</div>

#### ViewPager2ç»„ä»¶ä¸­åŒ…æ‹¬äº†ä¸‰ä¸ªFragment,åˆ†åˆ«æ˜¯Main_Fragment,History_Fragmentä¸Profile_Fragment,ä¸‰ä¸ªfragmentæ‹¥æœ‰å„è‡ªçš„ViewModelä¾›MainActivityè¿›è¡Œæ•°æ®äº¤æ¢ä¸UIäº¤äº’.

### 3.åœ¨å¡«å†™å‡æœŸå»å‘æ—¶,MainFragmentä¸HistoryFragmentä¼šæŒ‚è½½ä¸€ä¸ªå­Fragmentä¸ºç”¨æˆ·æä¾›å¡«å†™UI.
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
        <img src="image/Reporting.png" alt=â€œå¡«å†™ä¸­" style="width: 100%;">
        <img src="image/Changing.png" alt="ä¿®æ”¹ä¸­" style="width: 100%;">
        <img src="image/Checking.png" alt="æŸ¥çœ‹ä¸­" style="width: 100%;">
</div>

#### è¿™ä¸ªå¡«å†™ä¸å†å²å‡æœŸæŸ¥çœ‹çš„Fragmentå…·æœ‰è‰¯å¥½çš„é˜²å«å¼ç¨‹åºè®¾è®¡ä»¥åŠå¥å£®æ€§.

### 4.è¯¥é¡¹ç›®åŒ…å«äº†å¤šä¸ªViewModel,å…¶ä¸­æ¯ä¸ªViewModeléƒ½æ‹¥æœ‰å¤šä¸ªLiveData,å…¶ä¸­æœ‰å¾ˆå¤šLiveDataæä¾›äº†æ¶ˆæ¯ä¼ é€’çš„åŠŸèƒ½
#### [éƒ¨åˆ†ViewModelå­˜åœ¨è¿åå¼€é—­åŸåˆ™çš„é—®é¢˜ï¼ŒåŸºäºæ—¶é—´å› ç´ ,åœ¨ä¸ä¹…åæˆ‘ä¼šå°†å…¶ä¿®å¤]

#### GlobalViewModel
```kotlin
//com.example.vacationventurepe.viewmodels.GlobalViewModel
//AndroidViewModel,å…¨å±€æŒ‡å®šçš„å•ä¾‹ViewModel

package com.example.vacationventurepe.viewmodels

import android.app.Application
import android.os.Build
import android.util.Log
import androidx.lifecycle.AndroidViewModel
import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import com.example.vacationventurepe.entity.Student
import com.example.vacationventurepe.entity.Venture
import com.example.vacationventurepe.entity.VentureRecord
import java.time.LocalDate
import java.time.format.DateTimeFormatter


class GlobalViewModel(application: Application) : AndroidViewModel(application) {

    private val TAG = javaClass.name

    val studentEntityLiveData: MutableLiveData<Student> = MutableLiveData()

    val sessionIDLiveData: LiveData<String> get() = sessionIDMutableLiveData
    private val sessionIDMutableLiveData: MutableLiveData<String> = MutableLiveData()

    val locationLiveData: LiveData<String> get() = locationMutableLiveData
    private val locationMutableLiveData: MutableLiveData<String> = MutableLiveData()

    val vacationLiveData: LiveData<List<Venture>> get() = vacationMutableLiveData
    private val vacationMutableLiveData: MutableLiveData<List<Venture>> = MutableLiveData()

    //DS:è¢«è§£æ„LiveDataæ›¿ä»£
//    val historyVacationLiveData: LiveData<List<Venture>> get() = historyMutableLiveData
//    private val historyMutableLiveData: MutableLiveData<List<Venture>> = MutableLiveData()

    val historyAndRecordLiveData: LiveData<Pair<List<Venture>, List<VentureRecord>>> get() = historyAndRecordMutableLiveData
    private val historyAndRecordMutableLiveData: MutableLiveData<Pair<List<Venture>, List<VentureRecord>>> =
        MutableLiveData()

    fun postSessionID(id: String) {
//        DEBUG
        if (id != sessionIDMutableLiveData.value) {
            Log.d(TAG, "Globalæ³¨å†Œä¼šè¯IDä¸­!")
            sessionIDMutableLiveData.postValue(id)
        }
    }

    fun postLocation(address: String) {
        if (address != locationMutableLiveData.value) {
            locationMutableLiveData.postValue(address)
        }
    }


    fun postVacationList(vacationList: List<Venture>) {

        Log.d(TAG, "å‡æœŸåˆ—è¡¨åˆ·æ–°:\n")
        vacationList.forEach {
            Log.d(TAG, "å‡æœŸå·:${it.ventureCode}\n")
        }

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            val dateFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd")
            val resultVentures =
                vacationList.sortedByDescending {
                    LocalDate.parse(
                        it.ventureStartDate,
                        dateFormatter
                    )
                }

            vacationMutableLiveData.postValue(resultVentures)
        } else {
            vacationMutableLiveData.postValue(vacationList)
        }


    }

    fun postHistoryVacationAndRecordList(
        vacationList: List<Venture>,
        recordList: List<VentureRecord>
    ) {

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            val dateFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd")
            val resultVacations =
                vacationList.sortedByDescending {
                    LocalDate.parse(
                        it.ventureStartDate,
                        dateFormatter
                    )
                }

            historyAndRecordMutableLiveData.postValue(Pair(resultVacations, recordList))
        } else {
            historyAndRecordMutableLiveData.postValue(Pair(vacationList, recordList))
        }


    }
}

```

#### RequestInfoWriteFragmentViewModel
```kotlin
//com.example.vacationventurepe.viewmodels.mainactivity.RequestInfoWriteFragmentViewModel
//ä¸ºå¡«å†™Fragmentç¼–å†™çš„ViewModel
package com.example.vacationventurepe.viewmodels.mainactivity

import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel

class RequestInfoWriteFragmentViewModel : ViewModel() {

    var backEventLiveData: MutableLiveData<Boolean> = MutableLiveData()

    var locationChooseLiveData: MutableLiveData<Boolean> = MutableLiveData()
    var locationBackParamsLiveData: MutableLiveData<String> = MutableLiveData()

    var submitStatusliveData:MutableLiveData<String> = MutableLiveData()

}
```

### 5.é‡‡ç”¨Retrofitè¿›è¡Œä»“åº“å¼çš„ç½‘ç»œè¯·æ±‚
#### è¯¥é¡¹ç›®é‡‡ç”¨äº†Retrofitè¿›è¡Œç½‘ç»œè¯·æ±‚ä¸äº¤äº’,é€šè¿‡ç¼–å†™è¯·æ±‚API,æˆ‘ä»¬èƒ½çµæ´»çš„åœ¨æŸIPæˆ–åŸŸåå†…è¿›è¡Œå‘½åç©ºé—´ä»¥åŠå‚æ•°åˆ‡æ¢

#### ServerRetrofitAPI
```kotlin
//com.example.vacationventurepe.network.api.ServerRetrofitAPI
package com.example.vacationventurepe.network.api

import com.example.vacationventurepe.basetools.Base
import com.example.vacationventurepe.basetools.PB
import retrofit2.Call
import retrofit2.http.Field
import retrofit2.http.FormUrlEncoded
import retrofit2.http.GET
import retrofit2.http.POST
import retrofit2.http.Path

interface ServerRetrofitAPI {

    @POST(Base.BASE_HTTP_NAMESPACE)
    fun serverParentConnection(): Call<String>

    @FormUrlEncoded
    @POST(Base.BASE_HTTP_NAMESPACE)
    fun login(
        @Field(PB.A_ACTION) type: String,
        @Field(PB.G_LOGIN_ACCOUNT) account: String,
        @Field(PB.G_LOGIN_PASSWORD) password: String
    ): Call<String>

    @GET("android/{fileName}")
    fun fetchHTML(@Path("fileName") fileName: String): Call<String>

    @FormUrlEncoded
    @POST(Base.BASE_HTTP_NAMESPACE)
    fun resetPassword(
        @Field(PB.S_SESSION) sessionID: String,
        @Field(PB.A_ACTION) action: String,
        @Field(PB.G_LOGIN_ACCOUNT) studentID: String,
        @Field(PB.G_LOGIN_PASSWORD) originPsw: String,
        @Field(PB.RS_NEW_PASSWORD) newPsw: String
    ): Call<String>

    //DS:ç™»å½•åæ“ä½œ
    @FormUrlEncoded
    @POST(Base.BASE_HTTP_NAMESPACE)
    fun queryVacationList(
        @Field(PB.S_SESSION) sessionID: String,
        @Field(PB.A_ACTION) action: String,
        @Field(PB.QUERY_TYPE) queryType: String,
        @Field(PB.G_LOGIN_ACCOUNT) studentID: String,
        @Field(PB.G_STUDENT_CLASS_CODE) studentCode: String
    ): Call<String>

    @FormUrlEncoded
    @POST(Base.BASE_HTTP_NAMESPACE)
    fun recordOperation(
        @Field(PB.S_SESSION) sessionID:String,
        @Field(PB.A_ACTION) action: String,
        @Field(PB.RECORD_TYPE) recordType:String,
        @Field(PB.RECORD_JSON) recordJSON:String
    ):Call<String>

}
```
#### çµæ´»çš„ç»„åˆä»¥åŠé€»è¾‘å¤„ç†,ä½¿å¾—Retrofitèƒ½å¤Ÿè‰¯å¥½çš„ä¸æˆ‘çš„APPå¥‘åˆ
ServerFetcher
```kotlin
//com.example.vacationventurepe.network.fetchers.ServerFetcher
fun passwordChange(
    sessionID: String,
    studentCode: String,
    originPassword: String,
    newPassword: String
): MutableLiveData<String> {

    val responseLiveData: MutableLiveData<String> = MutableLiveData()

    serverRetrofitAPI
        .resetPassword(sessionID, PB.A_RESET_PSW, studentCode, originPassword, newPassword)
        .enqueue(object : Callback<String> {
            override fun onResponse(call: Call<String>, response: Response<String>) {
                responseLiveData.postValue(
                    if (response.body().toString() != "") {
                        JsonParser.parseString(response.body()).asJsonObject.get(PB.R_STATUS).asString
                    } else {
                        ""
                    }
                )
            }

            override fun onFailure(call: Call<String>, t: Throwable) {
                responseLiveData.postValue(Base.NETWORK_ON_FAILURE.toString())
            }
        })

    return responseLiveData
}
```

***

## ç¬¬ä¸‰æ–¹APIçš„åº”ç”¨
### è¯¥é¡¹ç›®é‡‡ç”¨äº†å¤šä¸ªç¬¬ä¸‰æ–¹APIä»¥åŠå®˜æ–¹AAR
```kotlin
//build.gradle.kts
 implementation("androidx.cardview:cardview:1.0.0+")
    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.appcompat)

    implementation(libs.androidx.lifecycle.livedata.ktx)
    implementation(libs.androidx.lifecycle.viewmodel.ktx)



    implementation(libs.androidx.navigation.fragment.ktx)
    implementation(libs.androidx.navigation.ui.ktx)

    implementation(libs.material)

    //åŸå¸‚é€‰æ‹©å™¨
    implementation("com.github.crazyandcoder:citypicker:6.0.2")

    //Retrofitä»“åº“åŒ–HTTPæœåŠ¡æ¡†æ¶
    implementation("com.squareup.retrofit2:retrofit:2.5.0")
    implementation("com.squareup.retrofit2:converter-scalars:2.5.0")
    implementation("com.squareup.okhttp3:logging-interceptor:4.9.0")

    //GSONæ•°æ®è½¬æ¢ä¸åå°„æ¡†æ¶
    implementation("com.google.code.gson:gson:2.8.9")

    //GlideåŸºäºRESTæ¨¡å¼çš„å›¾ç‰‡éƒ¨ç½²API
    implementation("com.github.bumptech.glide:glide:4.12.0")

    annotationProcessor("com.github.bumptech.glide:compiler:4.12.0")
    implementation("org.jsoup:jsoup:1.14.2")

    //é«˜å¾·åœ°å›¾æä¾›çš„é€†åœ°ç†ç¼–ç è§£ææœåŠ¡
    implementation(fileTree(mapOf(
        "dir" to "libs",
        "include" to listOf("*.aar", "*.jar"),
        "exclude" to listOf("")
    )))

    //é™„åŠ ï¼šç®€å•çš„æƒé™è¯·æ±‚
    implementation("pub.devrel:easypermissions:3.0.0")

    //åˆ·æ–°å¤´-SmartRefresh
    implementation  ("io.github.scwang90:refresh-layout-kernel:2.1.0")      //æ ¸å¿ƒå¿…é¡»ä¾èµ–
    implementation  ("io.github.scwang90:refresh-header-classics:2.1.0")    //ç»å…¸åˆ·æ–°å¤´
    implementation  ("io.github.scwang90:refresh-header-radar:2.1.0" )      //é›·è¾¾åˆ·æ–°å¤´

    testImplementation(libs.junit)
    androidTestImplementation(libs.androidx.junit)
    androidTestImplementation(libs.androidx.espresso.core)
```

***

## -TIPS-ğŸ“ä½¿ç”¨æ³¨æ„äº‹é¡¹ğŸ“-TIPS-

#### è¯¥é¡¹ç›®é‡‡ç”¨äº†é«˜å¾·åœ°å›¾å¼€æ”¾å¹³å°API,è¯·åœ¨ä½¿ç”¨å®šä½åŠŸèƒ½æ—¶,å°†API_KEYæ›´æ”¹æˆ–è€…æ›´æ¢ç¬¬ä¸‰æ–¹å®šä½ä»¥åŠé€†åœ°ç†ç¼–ç æœåŠ¡
#### Base
```kotlin
//com.example.vacationventurepe.basetools.Base
//AMapKey
        const val AMAP_KEY = "<YOUR API KEY>"
```

***

## ğŸ“®å†™åœ¨åé¢ğŸ“®

* #### è¯¥é¡¹ç›®æ˜¯ä»¥å­¦ä¹ ä¸ºç›®çš„è¿›è¡Œå¼€å‘çš„,æ‰€ä»¥å¯èƒ½è¿ç”¨äº†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¯”è¾ƒä¸ç¨³å®šçš„æ’ä»¶ä»¥åŠæ„ä»¶.
* #### è¯¥é¡¹ç›®ä¸­æ‰€è¿ç”¨çš„æ‰€æœ‰APIçš†ä¸ºå¼€æºAPI
* #### è¯¥é¡¹ç›®æ²¡æœ‰è¿›è¡Œè¿‡ç³»ç»Ÿæ€§çš„è½¯ä»¶æµ‹è¯•,å¦‚æœéå¿…è¦,è¯·å‹¿å°†è¯¥é¡¹ç›®æ‰“åŒ…ä¸ºAPKå¹¶å®‰è£…è‡³ç‰©ç†æœº
* #### Jakarta EEåç«¯æ­£åœ¨è¿›è¡Œä»£ç æ•´ç†ä¸­,ä¸ä¹…åå°†ä¼šå¼€æº
***

### é¡¹ç›®è¿ç”¨åˆ°çš„å¼€æºAPI:

[![CityPicker Badge](https://img.shields.io/badge/-CityPicker-0078d4?style=flat-square&logoColor=white&link=https://github.com/crazyandcoder/citypicker)](https://github.com/crazyandcoder/citypicker)
[![Retrofit Badge](https://img.shields.io/badge/-Retrofit2-b83b5e?style=flat-square&logoColor=white&link=https://square.github.io/retrofit/)](https://square.github.io/retrofit/)
[![OkHttp3 Badge](https://img.shields.io/badge/-OkHttp3-0d7377?style=flat-square&logoColor=white&link=https://github.com/square/okhttp)](https://github.com/square/okhttp)
[![GSON Badge](https://img.shields.io/badge/-Gson-ffd460?style=flat-square&logoColor=white&link=https://google.github.io/gson/)](https://google.github.io/gson/)
[![Glide Badge](https://img.shields.io/badge/-Glide-283c63?style=flat-square&logoColor=white&link=https://github.com/bumptech/glide)](https://github.com/bumptech/glide)
[![Jsoup Badge](https://img.shields.io/badge/-Jsoup-f57170?style=flat-square&logoColor=white&link=https://github.com/jhy/jsoup)](https://github.com/jhy/jsoup)
[![AMap Badge](https://img.shields.io/badge/-Amap-7098da?style=flat-square&logoColor=white&link=https://lbs.amap.com/)](https://lbs.amap.com/)
<br>
[![EasyPermissions Badge](https://img.shields.io/badge/-Easy%20Permissions-649dad?style=flat-square&logoColor=white&link=https://github.com/googlesamples/easypermissions)](https://github.com/googlesamples/easypermissions)
[![Smart Refresh Layout Badge](https://img.shields.io/badge/-Smart%20Refresh%20Layout-fa4659?style=flat-square&logoColor=white&link=https://github.com/scwang90/SmartRefreshLayout)](https://github.com/scwang90/SmartRefreshLayout)

### 2024.6.26<br>Timaviciix

<div align="center">
  <img src="image/robo_logo.png" width="50" height="50" alt="Robo Logic"/>
</div>